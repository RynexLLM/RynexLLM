"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[174],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),d=a,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||i;return r?n.createElement(h,o(o({ref:t},p),{},{components:r})):n.createElement(h,o({ref:t},p))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},9792:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var n=r(7462),a=(r(7294),r(3905));const i={},o="Summarizing Text with Map-Reduce in LLM-Chain",l={unversionedId:"getting-started-tutorial/summarizing-text-with-map-reduce",id:"getting-started-tutorial/summarizing-text-with-map-reduce",title:"Summarizing Text with Map-Reduce in LLM-Chain",description:"Having problems? Don't worry reach out on discord and we will help you out.",source:"@site/docs/getting-started-tutorial/05-summarizing-text-with-map-reduce.md",sourceDirName:"getting-started-tutorial",slug:"/getting-started-tutorial/summarizing-text-with-map-reduce",permalink:"/llm-chain/docs/getting-started-tutorial/summarizing-text-with-map-reduce",draft:!1,editUrl:"https://github.com/sobelio/llm-chain/tree/main/docs/docs/getting-started-tutorial/05-summarizing-text-with-map-reduce.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"sidebar",previous:{title:"Creating Your First Sequential Chain",permalink:"/llm-chain/docs/getting-started-tutorial/building-a-multi-step-chain"},next:{title:"Development Setup",permalink:"/llm-chain/docs/dev-setup"}},s={},u=[],p={toc:u},c="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"summarizing-text-with-map-reduce-in-llm-chain"},"Summarizing Text with Map-Reduce in LLM-Chain"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Having problems? Don't worry reach out on ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/kewN9Gtjt2"},"discord")," and we will help you out.")),(0,a.kt)("p",null,"Map-reduce is a powerful technique for processing and aggregating data in parallel. In this tutorial, we'll explore how to use map-reduce in ",(0,a.kt)("inlineCode",{parentName:"p"},"llm-chain")," to summarize text effectively. We'll cover implementing a basic map-reduce for text summarization."),(0,a.kt)("p",null,'To start create a file named in "article_to_summarize.md" take the content of a wikipedia article and paste it in there.'),(0,a.kt)("p",null,"Here's a Rust program that demonstrates how to create a map-reduce chain for summarizing text:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'\nuse llm_chain::chains::map_reduce::Chain;\nuse llm_chain::Parameters;\nuse llm_chain_openai::chatgpt::{Executor, Model, Role, Step};\n\n#[tokio::main(flavor = "current_thread")]\nasync fn main() {\n    let exec = Executor::new_default();\n    let map_prompt = Step::new(\n        Model::ChatGPT3_5Turbo,\n        [\n            (\n                Role::System,\n                "You are a bot for summarizing wikipedia articles, you are terse and focus on accuracy",\n            ),\n            (Role::User, "Summarize this article into bullet points:\\n{}"),\n        ],\n    );\n    let reduce_prompt = Step::new(\n        Model::ChatGPT3_5Turbo,\n        [\n            (Role::System, "You are a diligent bot that summarizes text"),\n            (\n                Role::User,\n                "Please combine the articles below into one summary as bullet points:\\n{}",\n            ),\n        ],\n    );\n    let chain = Chain::new(map_prompt, reduce_prompt);\n    let article = include_str!("article_to_summarize.md");\n    let docs = vec![Parameters::new_with_text(article)];\n    let res = chain.run(docs, Parameters::new(), &exec).await.unwrap();\n    println!("{:?}", res);\n}\n')),(0,a.kt)("p",null,"Let's break down the code and understand the different parts:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Define the map and reduce prompts as Step objects:\na. The map_prompt summarizes a given article into bullet points.\nb. The reduce_prompt combines multiple summaries into a single summary as bullet points."),(0,a.kt)("li",{parentName:"ol"},"Create a new map-reduce Chain by providing the map_prompt and reduce_prompt."),(0,a.kt)("li",{parentName:"ol"},"Load the article to be summarized and create a Parameters object with the text."),(0,a.kt)("li",{parentName:"ol"},"Execute the map-reduce Chain with the provided Parameters and store the result in res."),(0,a.kt)("li",{parentName:"ol"},"Print the LLM response to the console.")),(0,a.kt)("p",null,"This should be able to summarize any wikipedia article you might find. Play around with the prompt templates to make it best fit your usecase."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"That's it folks, thanks for following along for the tutorial. You are now ready to use ",(0,a.kt)("inlineCode",{parentName:"p"},"llm-chain")," for something useful. Don't forget to stop by ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/kewN9Gtjt2"},"discord")," and share what you are making."))}m.isMDXComponent=!0}}]);